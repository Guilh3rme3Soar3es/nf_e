<form (ngSubmit)="onSubmit($event)" [formGroup]="formModel">
    <div class="form feature-view-tab__content">
        <section>
            <div class="row">  
                <div class="col-sm-12">
                    <h1 class="form__title">Dados cadastrais</h1>
                </div>    
            </div>

            <div class="row">
                <div class="col-sm-12 col-md-6 form__fieldset">

                    <div class="row">
                        <div class="col-sm-12 form__group">
                            <label for="personType" class="form__label" [class.form__label--error]="formModel.get('personType').touched && formModel.get('personType').hasError('required')">
                                Tipo de pessoa
                                <span class="form__label form__label--required">*</span>
                            </label>
                            <select id="personType" formControlName="personType" class="form__input form__input--select" placeholder="Informe o tipo de pessoa" [class.form__input--error]="formModel.get('personType').touched && formModel.get('personType').hasError('required')">
                                <option value="PHYSICAL" selected>Física</option>
                                <option value="LEGAL">Jurídica</option>
                            </select>
                            <label class="form__label form__label--error" *ngIf="formModel.get('personType').touched && formModel.get('personType').hasError('required')">
                                Campo obrigatório
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div *ngIf="formModel.get('personType').value === 'LEGAL'" formGroupName="legal">
                    <div class="row">
                        <div class="col-sm-12 col-md-6 form__fieldset">
                            <div class="row">
                                <div class="col-sm-12 form__group">
                                    <label for="fancyName" class="form__label" [class.form__label--error]="formModel.get('legal').get('fancyName').touched && formModel.get('legal').get('fancyName').hasError('required')">
                                        Nome fantasia
                                        <span class="form__label form__label--required">*</span>
                                    </label>
                                    <input type="text" id="fancyName" formControlName="fancyName" class="form__input" placeholder="Informe o nome fantasia" [class.form__input--error]="formModel.get('legal').get('fancyName').touched && formModel.get('legal').get('fancyName').hasError('required')">
                                    <label class="form__label form__label--error" *ngIf="formModel.get('legal').get('fancyName').touched && formModel.get('legal').get('fancyName').hasError('required')">
                                        Campo obrigatório
                                    </label>
                                </div>
                            </div>
                        </div>   
                        <div class="col-sm-12 col-md-6 form__fieldset">
                            <div class="row">
                                <div class="col-sm-12 form__group">
                                    <label for="companyName" class="form__label" [class.form__label--error]="formModel.get('legal').get('companyName').touched && formModel.get('legal').get('companyName').hasError('required')">
                                        Razão social
                                        <span class="form__label form__label--required">*</span>
                                    </label>
                                    <input type="text" id="companyName" formControlName="companyName" class="form__input" placeholder="Informe a razão social" [class.form__input--error]="formModel.get('legal').get('companyName').touched && formModel.get('legal').get('companyName').hasError('required')">
                                    <label class="form__label form__label--error" *ngIf="formModel.get('legal').get('companyName').touched && formModel.get('legal').get('companyName').hasError('required')">
                                        Campo obrigatório
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 col-md-6 form__fieldset">
                            <div class="row">
                                <div class="col-sm-12 form__group">
                                    <label for="stateRegistration" class="form__label" [class.form__label--error]="formModel.get('legal').get('stateRegistration').touched && formModel.get('legal').get('stateRegistration').hasError('required')">
                                        Inscrição estadual
                                        <span class="form__label form__label--required">*</span>
                                    </label>
                                    <input type="text" id="stateRegistration" formControlName="stateRegistration" class="form__input" placeholder="Informe a inscrição estadual" [class.form__input--error]="formModel.get('legal').get('stateRegistration').touched && formModel.get('legal').get('stateRegistration').hasError('required')">
                                    <label class="form__label form__label--error" *ngIf="formModel.get('legal').get('stateRegistration').touched && formModel.get('legal').get('stateRegistration').hasError('required')">
                                        Campo obrigatório
                                    </label>
                                </div>
                            </div>
                        </div>         
                        <div class="col-sm-12 col-md-6 form__fieldset">
                            <div class="row">
                                <div class="col-sm-12 form__group">
                                    <label for="cnpj" class="form__label" [class.form__label--error]="formModel.get('legal').get('cnpj').touched && 
                                            (formModel.get('legal').get('cnpj').hasError('required') || formModel.get('legal').get('cnpj').hasError('invalidcnpj'))">
                                        CNPJ
                                        <span class="form__label form__label--required">*</span>
                                    </label>
                                    <input [textMask]="{mask: cnpjMask}" type="text" id="cnpj" formControlName="cnpj" class="form__input" placeholder="**.***.***/****-**" [class.form__input--error]="formModel.get('legal').get('cnpj').touched && formModel.get('legal').get('cnpj').hasError('required')">
                                    <label class="form__label form__label--error" *ngIf="formModel.get('legal').get('cnpj').touched && formModel.get('legal').get('cnpj').hasError('required')">
                                        Campo obrigatório
                                    </label>
                                    <label class="form__label form__label--error" *ngIf="formModel.get('legal').get('cnpj').touched && 
                                                !formModel.get('legal').get('cnpj').hasError('required') && formModel.get('legal').get('cnpj').hasError('invalidcnpj')">
                                        CNPJ inválido
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div *ngIf="formModel.get('personType').value === 'PHYSICAL'" formGroupName="physical">
                        <div class="row">
                            <div class="col-sm-12 col-md-6 form__fieldset">
                                <div class="row">
                                    <div class="col-sm-12 form__group">
                                        <label for="name" class="form__label" [class.form__label--error]="formModel.get('physical').get('name').touched && formModel.get('physical').get('name').hasError('required')">
                                            Nome
                                            <span class="form__label form__label--required">*</span>
                                        </label>
                                        <input type="text" id="name" formControlName="name" class="form__input" placeholder="Informe o nome" [class.form__input--error]="formModel.get('physical').get('name').touched && formModel.get('physical').get('name').hasError('required')">
                                        <label class="form__label form__label--error" *ngIf="formModel.get('physical').get('name').touched && formModel.get('physical').get('name').hasError('required')">
                                            Campo obrigatório
                                        </label>
                                    </div>
                                </div>
                            </div>   
                            <div class="col-sm-12 col-md-6 form__fieldset">
                                <div class="row">
                                    <div class="col-sm-12 form__group">
                                        <label for="cpf" class="form__label" [class.form__label--error]="formModel.get('physical').get('cpf').touched && 
                                                    (formModel.get('physical').get('cpf').hasError('required') || formModel.get('physical').get('cpf').hasError('invalidcpf'))">
                                            CPF
                                            <span class="form__label form__label--required">*</span>
                                        </label>
                                        <input [textMask]="{mask: cpfMask}" type="text" id="cpf" formControlName="cpf" class="form__input" placeholder="***.***.***-**" [class.form__input--error]="formModel.get('physical').get('cpf').touched && formModel.get('physical').get('cpf').hasError('required')">
                                        <label class="form__label form__label--error" *ngIf="formModel.get('physical').get('cpf').touched && formModel.get('physical').get('cpf').hasError('required')">
                                            Campo obrigatório
                                        </label>
                                        <label class="form__label form__label--error" *ngIf="formModel.get('physical').get('cpf').touched && 
                                                    !formModel.get('physical').get('cpf').hasError('required') && formModel.get('physical').get('cpf').hasError('invalidcpf')">
                                            CPF inválido
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>    
                    </div>
        </section>
    </div>

    <ndd-address-form [formModel]="formModel.get('address')"></ndd-address-form>

    <div class="feature-view-tab__footer">
        <button type="submit" class="ndd-ng-button ndd-ng-button--primary" [disabled]="formModel.invalid">Salvar</button>
        <button type="button" class="ndd-ng-button ndd-ng-button--cancel" (click)="onCancel()">Cancelar</button>
    </div>
</form>